"use strict";function _instanceof(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](t):t instanceof e}function _classCallCheck(t,e){if(!_instanceof(t,e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,s){return e&&_defineProperties(t.prototype,e),s&&_defineProperties(t,s),t}function _defineProperty(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var WhatsappButton=function(){function t(e,s,n,i,o,a,r,l,h){_classCallCheck(this,t),_defineProperty(this,"welcomeMessage","Fale conosco"),_defineProperty(this,"placeHolder_Message","Como podemos te ajudar?"),_defineProperty(this,"defaultMessage","OlÃ¡! Estou entrando em contato e gostaria de saber:"),_defineProperty(this,"HTMLElementsPairs",new Array),_defineProperty(this,"preDefColors",new Array("black","white","green","orange","yellow","red","blue","purple","gray")),this.whatsappIcon=0!=o&&void 0!=o?"whatsapp-"+o:"whatsapp",this.svgWhatsappPath=this.whatsappIcon?"node_modules/whatsapp-button.js/dist/wpp_icons/My icons collection-SVG-sprite.svg#".concat(this.whatsappIcon):"node_modules/whatsapp-button.js/dist/wpp_icons/My icons collection-SVG-sprite.svg#whatsapp",this.phoneNumber=e?this.setPhoneNumber(e):this.setPhoneNumber("error"),this.welcomeMessage=s?this.setWelcomeMessage(s):this.welcomeMessage,this.placeHolder_Message=n||this.placeHolder_Message,this.defaultMessage=i||this.defaultMessage,this.initButtonElements(o,h),a&&this.styleColor(a,o),r&&this.styleSubColor(r,o),l&&this.styleTextColor(l),h&&this.styleFontFamily(h),this.mountButtonStructure(o),document.body.appendChild(this.mountPairs()),window.sendMessage=this.setSendMessage(this.phoneNumber)}return _createClass(t,[{key:"newElem",value:function(t,e,s,n){function i(){return"svg"==t?"svg":"use"==t?"use":"circle"==t?"circle":"rect"==t?"rect":"path"==t&&"path"}var o;if(o=i()?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t),Array.isArray(e))for(var a=0;a<e.length;a++)"svg"===i()?o.setAttributeNS("http://www.w3.org/2000/svg",e[a],s[a]):"use"==i()?o.setAttributeNS("http://www.w3.org/1999/xlink",e[a],s[a]):"circle"===i()||"rect"===i()||"path"===i()?o.setAttributeNS(null,e[a],s[a]):o.setAttribute(e[a],s[a]);else o.setAttribute(e,s);"SPAN"==o.tagName&&(o.innerHTML=n);var r=document.body.appendChild(o);return document.body.removeChild(o),r}},{key:"initButtonElements",value:function(t,e){e&&this.isSecureURL(e)&&(this.linkFontFamily=this.newElem("link",["rel","type","href"],["stylesheet","text/css",e]),document.head.appendChild(this.linkFontFamily)),1!=t&&2!=t||(this.svgCircle=this.newElem("circle",["cx","cy","r","style"],["32","32","31","fill: #fff"]),this.svgPath=this.newElem("path",["d","style"],["M 7 51 l 10 7 l -11 3 z","fill: #fff"])),this.buttonWrapper=this.newElem("div",["id","class"],["whatsapp_wrapper","whatsapp_cta"]),this.inputCheckbox=this.newElem("input",["id","class","type"],["form_checkbox","form_checkbox","checkbox"]),this.linkButton=this.newElem("a",["class","href","target","rel"],["whatsapp_button","https://api.whatsapp.com/send?phone="+this.phoneNumber+"&text="+encodeURIComponent(this.defaultMessage.trim()),"_blank","noopener noreferrer"]),this.svgButton=this.newElem("svg","class","icon"),this.svgButtonUse=this.newElem("use",["xlink:href","class"],[this.svgWhatsappPath,"svgButtonUse"]),this.hoverText=this.newElem("div","class","whatsapp_hover"),this.spanHoverText=this.newElem("span","class","hover_text",this.welcomeMessage),this.formWrapper=this.newElem("div","class","whatsapp_form"),this.buttonForm=this.newElem("form",["class"],["form_container"]),this.textarea=this.newElem("textarea",["id","class","name","placeholder","required"],["message","form_text","mensagem",this.placeHolder_Message,""]),this.label=this.newElem("label",["id","class","for","onclick"],["send_label","send_label","send","return sendMessage()"]),this.labelInput=this.newElem("input",["id","type","name","value","class"],["send","checkbox","send","","labelInput"]),this.svgLabelSend=this.newElem("svg","class","icon_send"),this.svgLabelUse=this.newElem("use",["xlink:href","class"],["node_modules/whatsapp-button.js/dist/wpp_icons/My icons collection-SVG-sprite.svg#send-button","svgLabelUse"])}},{key:"mountButtonStructure",value:function(t){1!=t&&2!=t||(this.HTMLElementsPairs.push([this.svgButton,this.svgCircle]),this.HTMLElementsPairs.push([this.svgButton,this.svgPath])),this.HTMLElementsPairs.push([this.svgButton,this.svgButtonUse]),this.HTMLElementsPairs.push([this.linkButton,this.svgButton]),this.HTMLElementsPairs.push([this.svgLabelSend,this.svgLabelUse]),this.HTMLElementsPairs.push([this.label,this.svgLabelSend]),this.HTMLElementsPairs.push([this.label,this.labelInput]),this.HTMLElementsPairs.push([this.buttonForm,this.label]),this.HTMLElementsPairs.push([this.buttonForm,this.textarea]),this.HTMLElementsPairs.push([this.formWrapper,this.buttonForm]),this.HTMLElementsPairs.push([this.hoverText,this.spanHoverText]),this.HTMLElementsPairs.push([this.buttonWrapper,this.inputCheckbox]),this.HTMLElementsPairs.push([this.buttonWrapper,this.linkButton]),this.HTMLElementsPairs.push([this.buttonWrapper,this.hoverText]),this.HTMLElementsPairs.push([this.buttonWrapper,this.formWrapper])}},{key:"mountPairs",value:function(){var t;return this.HTMLElementsPairs.forEach(function(e){e[0].appendChild(e[1]),t=e[0]}),t}},{key:"styleColor",value:function(t,e){"preDefColor"===this.checkColorFormat(t)?(this.spanHoverText.classList.add("bg-".concat(t)),this.formWrapper.classList.add("bg-".concat(t)),this.textarea.classList.add("bg-".concat(t)),this.svgLabelSend.classList.add("bg-".concat(t)),1!=e&&2!=e||(this.svgCircle.style.cssText="fill: ".concat(t),this.svgPath.style.cssText="fill: ".concat(t)),"black"==t&&(this.svgButtonUse.style.cssText="fill: white")):"hexColor"===this.checkColorFormat(t)&&(this.spanHoverText.style.cssText="background-color: ".concat(t," !important;"),this.formWrapper.style.cssText="background-color: ".concat(t," !important;"),this.textarea.style.cssText="background-color: ".concat(t," !important;"),1!=e&&2!=e||(this.svgCircle.style.cssText="fill: ".concat(t),this.svgPath.style.cssText="fill: ".concat(t)),"#000"!=t&&"#000000"!=t||(this.svgButtonUse.style.cssText="fill: white !important;"))}},{key:"styleSubColor",value:function(t,e){"3"==e?(this.svgButtonUse.style.cssText+="fill: #000000 !important;",this.textarea.style.cssText+="border-color: ".concat(t," !important;;"),this.svgLabelSend.style.cssText+="fill: ".concat(t," !important;")):this.checkColorFormat(t)&&(this.svgButtonUse.style.cssText+="fill: ".concat(t," !important;"),this.textarea.style.cssText+="border-color: ".concat(t," !important;;"),this.svgLabelSend.style.cssText+="fill: ".concat(t," !important;"))}},{key:"styleTextColor",value:function(t){this.checkColorFormat(t)&&(this.textarea.style.cssText+="color: ".concat(t," !important;"),this.spanHoverText.style.cssText+="color: ".concat(t," !important;"))}},{key:"styleFontFamily",value:function(t){this.isSecureURL(t)&&this.extractFontFamily(t)&&(this.textarea.style.cssText+="font-family: ".concat(this.extractFontFamily(t)," !important;"),this.spanHoverText.style.cssText+="font-family: ".concat(this.extractFontFamily(t)," !important;"))}},{key:"setSendMessage",value:function(t){return function(){var e=document.getElementById("message").value;e=encodeURIComponent(e.trim());var s="https://api.whatsapp.com/send?phone=".concat(t,"&text=").concat(e);return window.open(s,"height=200","width=200"),document.getElementById("message").value="",!1}}},{key:"checkColorFormat",value:function(t){if("string"==typeof t&&"#"!=t.substring(0,1)&&this.preDefColors.includes(t))return"preDefColor";if("#"!==t.substring(0,1)||7!=t.length&&4!=t.length){if("rgb"===t.substring(0,3)&&this.isRGBColor(t)||"rgba"===t.substring(0,4)&&this.isRBGAColor(t))return"rgb";throw new Error("Color code has a wrong format. Please, use #xxxxxx, #xxx or\ncheck the documentation for pre-defined colors list at: https://github.com/sashaclimax/whatsappButton")}return"hexColor"}},{key:"isRGBColor",value:function(t){var e=t.substring(4,t.length-1).split(","),s=!0;return e.forEach(function(t){e[e.indexOf(t)]=e[e.indexOf(t)].trim(),t>=0&&t<=255&&1==s?(e[e.indexOf(t)]=!0,s=!0):s=!1}),!(!s||3!=e.length)}},{key:"isRBGAColor",value:function(t){var e=t.substring(5,t.length-1).split(","),s=!0;return e.forEach(function(t){e[e.indexOf(t)]=e[e.indexOf(t)].trim(),t>=0&&t<=255&&1==s?(e[e.indexOf(t)]=!0,s=!0):s=!1}),!!(s&&e[3]>=0&&e[3]<=1&&4==e.length)}},{key:"isSecureURL",value:function(t){if("https"===t.substring(0,5)&&t.includes("https://fonts.googleapis.com/css?family="))return!0;throw new Error("Custom font URL not compatible.\nPlease use Google Fonts API to select a font.\nFor more information, please\ncheck the documentation at https://github.com/sashaclimax/whatsappButton")}},{key:"extractFontFamily",value:function(t){var e=t.substring(40,t.length).split("&")[0];if(e.includes("|"))throw new Error("Invalid font style. Please, use only one font style. For more information,\ncheck the documentation at: https://github.com/sashaclimax/whatsappButton");if(e.includes("+")){for(var s=e.split("+").length-1,n=0;n<s;n++)e=e.replace("+"," ");return e}return e}},{key:"setPhoneNumber",value:function(t){if("number"==typeof t&&(t=t.toString()),isNaN(t)||"string"!=typeof t)throw new Error("Missing phone number or it has a wrong format. Please, use only numbers: eg. 5522123456789.\nFor more information, check the documentation at: https://github.com/sashaclimax/whatsappButton");return t.includes("+")?t=t.replace("+",""):t.includes("-")&&(t=t.replace("-","")),t}},{key:"setWelcomeMessage",value:function(t){return"string"!=typeof t&&(t=t.toString()),t}}]),t}();